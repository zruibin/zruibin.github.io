{code: 0, data:{"modifiedTime": "1444738500.0", "title": "CMake\u5165\u95e8\u5b9e\u6218", "createTime": "1436592060.0", "summary": "CMake\u5165\u95e8\u5b9e\u6218 pkg-config for mac \u5b89\u88c5", "content": "<p><a href=\"http://www.hahack.com/codes/cmake/\" target=\"_blank\" rel=\"nofollow\">http://www.hahack.com/codes/cmake/</a></p>\n<h2>\u4ec0\u4e48\u662f CMake</h2>\n<blockquote><p>All problems in computer science can be solved by another level of indirection.\nDavid Wheeler</p>\n</blockquote>\n<p style=\"margin-top: 0px; color: rgb(51, 51, 51); font-family: 'Open Sans', 'Helvetica Neue', Helvetica, 'Microsoft YaHei', 'WenQuanYi Micro Hei', Arial, sans-serif; font-size: 17px; line-height: 20px; white-space: normal; background-color: rgb(255, 255, 255);\">\u4f60\u6216\u8bb8\u542c\u8fc7\u597d\u51e0\u79cd Make \u5de5\u5177\uff0c\u4f8b\u5982&nbsp;<a href=\"http://www.hahack.com/wiki/tools-makefile.html\" rel=\"nofollow\">GNU Make</a>&nbsp;\uff0cQT \u7684&nbsp;<a href=\"http://qt-project.org/doc/qt-4.8/qmake-manual.html\" target=\"_blank\" rel=\"nofollow\">qmake</a>&nbsp;\uff0c\u5fae\u8f6f\u7684<a href=\"http://msdn.microsoft.com/en-us/library/ms930369.aspx\" target=\"_blank\" rel=\"nofollow\">MS nmake</a>\uff0cBSD Make\uff08<a href=\"http://www.freebsd.org/doc/en/books/pmake/\" target=\"_blank\" rel=\"nofollow\">pmake</a>\uff09\uff0c<a href=\"http://makepp.sourceforge.net/\" target=\"_blank\" rel=\"nofollow\">Makepp</a>\uff0c\u7b49\u7b49\u3002\u8fd9\u4e9b Make \u5de5\u5177\u9075\u5faa\u7740\u4e0d\u540c\u7684\u89c4\u8303\u548c\u6807\u51c6\uff0c\u6240\u6267\u884c\u7684 Makefile \u683c\u5f0f\u4e5f\u5343\u5dee\u4e07\u522b\u3002\u8fd9\u6837\u5c31\u5e26\u6765\u4e86\u4e00\u4e2a\u4e25\u5cfb\u7684\u95ee\u9898\uff1a\u5982\u679c\u8f6f\u4ef6\u60f3\u8de8\u5e73\u53f0\uff0c\u5fc5\u987b\u8981\u4fdd\u8bc1\u80fd\u591f\u5728\u4e0d\u540c\u5e73\u53f0\u7f16\u8bd1\u3002\u800c\u5982\u679c\u4f7f\u7528\u4e0a\u9762\u7684 Make \u5de5\u5177\uff0c\u5c31\u5f97\u4e3a\u6bcf\u4e00\u79cd\u6807\u51c6\u5199\u4e00\u6b21 Makefile \uff0c\u8fd9\u5c06\u662f\u4e00\u4ef6\u8ba9\u4eba\u6293\u72c2\u7684\u5de5\u4f5c\u3002</p>\n<p style=\"margin-top: 0px; color: rgb(51, 51, 51); font-family: 'Open Sans', 'Helvetica Neue', Helvetica, 'Microsoft YaHei', 'WenQuanYi Micro Hei', Arial, sans-serif; font-size: 17px; line-height: 20px; white-space: normal; background-color: rgb(255, 255, 255);\">CMake<span style=\"display: block; float: right; width: 0px;\"></span></span>\u5c31\u662f\u9488\u5bf9\u4e0a\u9762\u95ee\u9898\u6240\u8bbe\u8ba1\u7684\u5de5\u5177\uff1a\u5b83\u9996\u5148\u5141\u8bb8\u5f00\u53d1\u8005\u7f16\u5199\u4e00\u79cd\u5e73\u53f0\u65e0\u5173\u7684 CMakeList.txt \u6587\u4ef6\u6765\u5b9a\u5236\u6574\u4e2a\u7f16\u8bd1\u6d41\u7a0b\uff0c\u7136\u540e\u518d\u6839\u636e\u76ee\u6807\u7528\u6237\u7684\u5e73\u53f0\u8fdb\u4e00\u6b65\u751f\u6210\u6240\u9700\u7684\u672c\u5730\u5316 Makefile \u548c\u5de5\u7a0b\u6587\u4ef6\uff0c\u5982 Unix \u7684 Makefile \u6216 Windows \u7684 Visual Studio \u5de5\u7a0b\u3002\u4ece\u800c\u505a\u5230\u201cWrite once, run everywhere\u201d\u3002\u663e\u7136\uff0cCMake \u662f\u4e00\u4e2a\u6bd4\u4e0a\u8ff0\u51e0\u79cd make \u66f4\u9ad8\u7ea7\u7684\u7f16\u8bd1\u914d\u7f6e\u5de5\u5177\u3002\u4e00\u4e9b\u4f7f\u7528 CMake \u4f5c\u4e3a\u9879\u76ee\u67b6\u6784\u7cfb\u7edf\u7684\u77e5\u540d\u5f00\u6e90\u9879\u76ee\u6709<a href=\"http://www.vtk.org/\" target=\"_blank\" rel=\"nofollow\">VTK</a>\u3001<a href=\"http://www.itk.org/\" target=\"_blank\" rel=\"nofollow\">ITK</a>\u3001<a href=\"http://kde.org/\" target=\"_blank\" rel=\"nofollow\">KDE</a>\u3001<a href=\"http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/core/doc/intro.html\" target=\"_blank\" rel=\"nofollow\">OpenCV</a>\u3001<a href=\"http://www.openscenegraph.org/\" target=\"_blank\" rel=\"nofollow\">OSG</a>&nbsp;\u7b49&nbsp;<a href=\"http://www.hahack.com/codes/cmake/#fn1\" rel=\"nofollow\">1</a>\u3002</p><p><br/></p>\n<h3>\u5728 linux \u5e73\u53f0\u4e0b\u4f7f\u7528 CMake \u751f\u6210 Makefile \u5e76\u7f16\u8bd1\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a</h3>\n<p>\u7f16\u5199 CMake \u914d\u7f6e\u6587\u4ef6 CMakeLists.txt \u3002</p>\n<p>\u6267\u884c\u547d\u4ee4 cmake PATH \u6216\u8005 ccmake PATH \u751f\u6210 Makefile 1 \n1ccmake \u548c cmake \u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684\u754c\u9762\u3002\n\u3002\u5176\u4e2d\uff0c PATH \u662f CMakeLists.txt \u6240\u5728\u7684\u76ee\u5f55\u3002</p>\n<h4>\u4f7f\u7528 make \u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u3002</h4>\n<p>\u672c\u6587\u5c06\u4ece\u5b9e\u4f8b\u5165\u624b\uff0c\u4e00\u6b65\u6b65\u8bb2\u89e3 CMake \u7684\u5e38\u89c1\u7528\u6cd5\uff0c\u6587\u4e2d\u6240\u6709\u7684\u5b9e\u4f8b\u4ee3\u7801\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u3002\u5982\u679c\u4f60\u8bfb\u5b8c\u4ecd\u89c9\u5f97\u610f\u72b9\u672a\u5c3d\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5b66\u4e60\u6211\u5728\u6587\u7ae0\u672b\u5c3e\u63d0\u4f9b\u7684\u5176\u4ed6\u8d44\u6e90\u3002\n\u5165\u95e8\u6848\u4f8b\uff1a\u5355\u4e2a\u6e90\u6587\u4ef6</p>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo1\" target=\"_blank\" rel=\"nofollow\">Demo1</a>\u3002</h5>\n<p>\u5bf9\u4e8e\u7b80\u5355\u7684\u9879\u76ee\uff0c\u53ea\u9700\u8981\u5199\u51e0\u884c\u4ee3\u7801\u5c31\u53ef\u4ee5\u4e86\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u7684\u9879\u76ee\u4e2d\u53ea\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6 main.cc \uff0c\u8be5\u7a0b\u5e8f\u7684\u7528\u9014\u662f\u8ba1\u7b97\u4e00\u4e2a\u6570\u7684\u6307\u6570\u5e42\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#include </span>\n<span class=\"cp\">#include </span>\n<span class=\"cm\">/**</span>\n<span class=\"cm\"> * power - Calculate the power of number.</span>\n<span class=\"cm\"> * @param base: Base value.</span>\n<span class=\"cm\"> * @param exponent: Exponent value.</span>\n<span class=\"cm\"> *</span>\n<span class=\"cm\"> * @return base raised to the power exponent.</span>\n<span class=\"cm\"> */</span>\n<span class=\"kt\">double</span> <span class=\"nf\">power</span><span class=\"p\">(</span><span class=\"kt\">double</span> <span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"kt\">int</span> <span class=\"n\">exponent</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"kt\">int</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">base</span><span class=\"p\">;</span>\n    <span class=\"kt\">int</span> <span class=\"n\">i</span><span class=\"p\">;</span>\n\n    <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"n\">i</span> <span class=\"o\">=</span> <span class=\"mi\">1</span><span class=\"p\">;</span> <span class=\"n\">i</span> <span class=\"o\">&lt;</span> <span class=\"n\">exponent</span><span class=\"p\">;</span> <span class=\"o\">++</span><span class=\"n\">i</span><span class=\"p\">){</span>\n        <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">result</span> <span class=\"o\">*</span> <span class=\"n\">base</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"n\">result</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">int</span> <span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">argc</span><span class=\"p\">,</span> <span class=\"kt\">char</span> <span class=\"o\">*</span><span class=\"n\">argv</span><span class=\"p\">[])</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">argc</span> <span class=\"o\">&lt;</span> <span class=\"mi\">3</span><span class=\"p\">){</span>\n        <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Usage: %s base exponent </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]);</span>\n        <span class=\"k\">return</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"kt\">double</span> <span class=\"n\">base</span> <span class=\"o\">=</span> <span class=\"n\">atof</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]);</span>\n    <span class=\"kt\">int</span> <span class=\"n\">exponent</span> <span class=\"o\">=</span> <span class=\"n\">atoi</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">power</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;%g ^ %d is %g</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">,</span> <span class=\"n\">result</span><span class=\"p\">);</span>\n    <span class=\"k\">return</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<h4>\u7f16\u5199 CMakeLists.txt</h4>\n<p>\u9996\u5148\u7f16\u5199 CMakeLists.txt \u6587\u4ef6\uff0c\u5e76\u4fdd\u5b58\u5728\u4e0e main.cc \u6e90\u6587\u4ef6\u540c\u4e2a\u76ee\u5f55\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># CMake \u6700\u4f4e\u7248\u672c\u53f7\u8981\u6c42</span>\n<span class=\"n\">cmake_minimum_required</span> <span class=\"p\">(</span><span class=\"n\">VERSION</span> <span class=\"mf\">2.8</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u9879\u76ee\u4fe1\u606f</span>\n<span class=\"n\">project</span> <span class=\"p\">(</span><span class=\"n\">Demo1</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6307\u5b9a\u751f\u6210\u76ee\u6807</span>\n<span class=\"n\">add_executable</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>CMakeLists.txt \u7684\u8bed\u6cd5\u6bd4\u8f83\u7b80\u5355\uff0c\u7531\u547d\u4ee4\u3001\u6ce8\u91ca\u548c\u7a7a\u683c\u7ec4\u6210\uff0c\u5176\u4e2d\u547d\u4ee4\u662f\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u3002\u7b26\u53f7 # \u540e\u9762\u7684\u5185\u5bb9\u88ab\u8ba4\u4e3a\u662f\u6ce8\u91ca\u3002\u547d\u4ee4\u7531\u547d\u4ee4\u540d\u79f0\u3001\u5c0f\u62ec\u53f7\u548c\u53c2\u6570\u7ec4\u6210\uff0c\u53c2\u6570\u4e4b\u95f4\u4f7f\u7528\u7a7a\u683c\u8fdb\u884c\u95f4\u9694\u3002\n\u5bf9\u4e8e\u4e0a\u9762\u7684 CMakeLists.txt \u6587\u4ef6\uff0c\u4f9d\u6b21\u51fa\u73b0\u4e86\u51e0\u4e2a\u547d\u4ee4\uff1a</p>\n<p>cmake_minimum_required\uff1a\u6307\u5b9a\u8fd0\u884c\u6b64\u914d\u7f6e\u6587\u4ef6\u6240\u9700\u7684 CMake \u7684\u6700\u4f4e\u7248\u672c\uff1b</p>\n<p>project\uff1a\u53c2\u6570\u662f main\uff0c\u8be5\u547d\u4ee4\u8868\u793a\u9879\u76ee\u7684\u540d\u79f0\u662f main \u3002</p>\n<p>add_executable\uff1a \u5c06\u540d\u4e3a main.cc \u7684\u6e90\u6587\u4ef6\u7f16\u8bd1\u6210\u4e00\u4e2a\u540d\u79f0\u4e3a Demo \u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002</p>\n<h4>\u7f16\u8bd1\u9879\u76ee</h4>\n<p>\u4e4b\u540e\uff0c\u5728\u5f53\u524d\u76ee\u5f55\u6267\u884c cmake . \uff0c\u5f97\u5230 Makefile \u540e\u518d\u4f7f\u7528 make \u547d\u4ee4\u7f16\u8bd1\u5f97\u5230 Demo1 \u53ef\u6267\u884c\u6587\u4ef6\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo1</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">cmake</span> <span class=\"p\">.</span>\n<span class=\"o\">--</span> <span class=\"n\">The</span> <span class=\"n\">C</span> <span class=\"n\">compiler</span> <span class=\"n\">identification</span> <span class=\"n\">is</span> <span class=\"n\">GNU</span> <span class=\"mf\">4.8.2</span>\n<span class=\"o\">--</span> <span class=\"n\">The</span> <span class=\"n\">CXX</span> <span class=\"n\">compiler</span> <span class=\"n\">identification</span> <span class=\"n\">is</span> <span class=\"n\">GNU</span> <span class=\"mf\">4.8.2</span>\n<span class=\"o\">--</span> <span class=\"n\">Check</span> <span class=\"k\">for</span> <span class=\"n\">working</span> <span class=\"n\">C</span> <span class=\"nl\">compiler</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">sbin</span><span class=\"o\">/</span><span class=\"n\">cc</span>\n<span class=\"o\">--</span> <span class=\"n\">Check</span> <span class=\"k\">for</span> <span class=\"n\">working</span> <span class=\"n\">C</span> <span class=\"nl\">compiler</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">sbin</span><span class=\"o\">/</span><span class=\"n\">cc</span> <span class=\"o\">--</span> <span class=\"n\">works</span>\n<span class=\"o\">--</span> <span class=\"n\">Detecting</span> <span class=\"n\">C</span> <span class=\"n\">compiler</span> <span class=\"n\">ABI</span> <span class=\"n\">info</span>\n<span class=\"o\">--</span> <span class=\"n\">Detecting</span> <span class=\"n\">C</span> <span class=\"n\">compiler</span> <span class=\"n\">ABI</span> <span class=\"n\">info</span> <span class=\"o\">-</span> <span class=\"n\">done</span>\n<span class=\"o\">--</span> <span class=\"n\">Check</span> <span class=\"k\">for</span> <span class=\"n\">working</span> <span class=\"n\">CXX</span> <span class=\"nl\">compiler</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">sbin</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">++</span>\n<span class=\"o\">--</span> <span class=\"n\">Check</span> <span class=\"k\">for</span> <span class=\"n\">working</span> <span class=\"n\">CXX</span> <span class=\"nl\">compiler</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">sbin</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">++</span> <span class=\"o\">--</span> <span class=\"n\">works</span>\n<span class=\"o\">--</span> <span class=\"n\">Detecting</span> <span class=\"n\">CXX</span> <span class=\"n\">compiler</span> <span class=\"n\">ABI</span> <span class=\"n\">info</span>\n<span class=\"o\">--</span> <span class=\"n\">Detecting</span> <span class=\"n\">CXX</span> <span class=\"n\">compiler</span> <span class=\"n\">ABI</span> <span class=\"n\">info</span> <span class=\"o\">-</span> <span class=\"n\">done</span>\n<span class=\"o\">--</span> <span class=\"n\">Configuring</span> <span class=\"n\">done</span>\n<span class=\"o\">--</span> <span class=\"n\">Generating</span> <span class=\"n\">done</span>\n<span class=\"o\">--</span> <span class=\"n\">Build</span> <span class=\"n\">files</span> <span class=\"n\">have</span> <span class=\"n\">been</span> <span class=\"n\">written</span> <span class=\"nl\">to</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo1</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo1</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">make</span>\n<span class=\"n\">Scanning</span> <span class=\"n\">dependencies</span> <span class=\"n\">of</span> <span class=\"n\">target</span> <span class=\"n\">Demo</span>\n<span class=\"p\">[</span><span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Building</span> <span class=\"n\">C</span> <span class=\"n\">object</span> <span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">Demo</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">.</span><span class=\"n\">o</span>\n<span class=\"n\">Linking</span> <span class=\"n\">C</span> <span class=\"n\">executable</span> <span class=\"n\">Demo</span>\n<span class=\"p\">[</span><span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Built</span> <span class=\"n\">target</span> <span class=\"n\">Demo</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo1</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo</span> <span class=\"mi\">5</span> <span class=\"mi\">4</span>\n<span class=\"mi\">5</span> <span class=\"o\">^</span> <span class=\"mi\">4</span> <span class=\"n\">is</span> <span class=\"mi\">625</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo1</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo</span> <span class=\"mi\">7</span> <span class=\"mi\">3</span>\n<span class=\"mi\">7</span> <span class=\"o\">^</span> <span class=\"mi\">3</span> <span class=\"n\">is</span> <span class=\"mi\">343</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo1</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo</span> <span class=\"mi\">2</span> <span class=\"mi\">10</span>\n<span class=\"mi\">2</span> <span class=\"o\">^</span> <span class=\"mi\">10</span> <span class=\"n\">is</span> <span class=\"mi\">1024</span>\n</code></pre></div>\n<p>\u591a\u4e2a\u6e90\u6587\u4ef6</p>\n<h4>\u540c\u4e00\u76ee\u5f55\uff0c\u591a\u4e2a\u6e90\u6587\u4ef6</h4>\n<h5>\u672c\u5c0f\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo2\" target=\"_blank\" rel=\"nofollow\">Demo2</a>\u3002</h5>\n<p>\u4e0a\u9762\u7684\u4f8b\u5b50\u53ea\u6709\u5355\u4e2a\u6e90\u6587\u4ef6\u3002\u73b0\u5728\u5047\u5982\u628a power \u51fd\u6570\u5355\u72ec\u5199\u8fdb\u4e00\u4e2a\u540d\u4e3a MathFunctions.c \u7684\u6e90\u6587\u4ef6\u91cc\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u5de5\u7a0b\u53d8\u6210\u5982\u4e0b\u7684\u5f62\u5f0f\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo2</span>\n    <span class=\"o\">|</span>\n    <span class=\"o\">+---</span> <span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span>\n    <span class=\"o\">|</span>\n    <span class=\"o\">+---</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">cc</span>\n    <span class=\"o\">|</span>\n    <span class=\"o\">+---</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">h</span>\n</code></pre></div>\n<p>\u8fd9\u4e2a\u65f6\u5019\uff0cCMakeLists.txt \u53ef\u4ee5\u6539\u6210\u5982\u4e0b\u7684\u5f62\u5f0f\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># CMake \u6700\u4f4e\u7248\u672c\u53f7\u8981\u6c42</span>\n<span class=\"n\">cmake_minimum_required</span> <span class=\"p\">(</span><span class=\"n\">VERSION</span> <span class=\"mf\">2.8</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u9879\u76ee\u4fe1\u606f</span>\n<span class=\"n\">project</span> <span class=\"p\">(</span><span class=\"n\">Demo2</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6307\u5b9a\u751f\u6210\u76ee\u6807</span>\n<span class=\"n\">add_executable</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u552f\u4e00\u7684\u6539\u52a8\u53ea\u662f\u5728 add_executable \u547d\u4ee4\u4e2d\u589e\u52a0\u4e86\u4e00\u4e2a MathFunctions.cc \u6e90\u6587\u4ef6\u3002\u8fd9\u6837\u5199\u5f53\u7136\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u662f\u5982\u679c\u6e90\u6587\u4ef6\u5f88\u591a\uff0c\u628a\u6240\u6709\u6e90\u6587\u4ef6\u7684\u540d\u5b57\u90fd\u52a0\u8fdb\u53bb\u5c06\u662f\u4e00\u4ef6\u70e6\u4eba\u7684\u5de5\u4f5c\u3002\u66f4\u7701\u4e8b\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 aux_source_directory \u547d\u4ee4\uff0c\u8be5\u547d\u4ee4\u4f1a\u67e5\u627e\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u5b58\u8fdb\u6307\u5b9a\u53d8\u91cf\u540d\u3002\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">aux_source_directory</span><span class=\"p\">()</span>\n</code></pre></div>\n<p>\u56e0\u6b64\uff0c\u53ef\u4ee5\u4fee\u6539 CMakeLists.txt \u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># CMake \u6700\u4f4e\u7248\u672c\u53f7\u8981\u6c42</span>\n<span class=\"n\">cmake_minimum_required</span> <span class=\"p\">(</span><span class=\"n\">VERSION</span> <span class=\"mf\">2.8</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u9879\u76ee\u4fe1\u606f</span>\n<span class=\"n\">project</span> <span class=\"p\">(</span><span class=\"n\">Demo2</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6</span>\n<span class=\"cp\"># \u5e76\u5c06\u540d\u79f0\u4fdd\u5b58\u5230 DIR_SRCS \u53d8\u91cf</span>\n<span class=\"n\">aux_source_directory</span><span class=\"p\">(.</span> <span class=\"n\">DIR_SRCS</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6307\u5b9a\u751f\u6210\u76ee\u6807</span>\n<span class=\"n\">add_executable</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">DIR_SRCS</span><span class=\"p\">})</span>\n</code></pre></div>\n<p>\u8fd9\u6837\uff0cCMake \u4f1a\u5c06\u5f53\u524d\u76ee\u5f55\u6240\u6709\u6e90\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u8d4b\u503c\u7ed9\u53d8\u91cf DIR_SRCS \uff0c\u518d\u6307\u793a\u53d8\u91cf DIR_SRCS \u4e2d\u7684\u6e90\u6587\u4ef6\u9700\u8981\u7f16\u8bd1\u6210\u4e00\u4e2a\u540d\u79f0\u4e3a Demo \u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002\n\u591a\u4e2a\u76ee\u5f55\uff0c\u591a\u4e2a\u6e90\u6587\u4ef6</p>\n<h5>\u672c\u5c0f\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo3\" target=\"_blank\" rel=\"nofollow\">Demo3</a>\u3002</h5>\n<p>\u73b0\u5728\u8fdb\u4e00\u6b65\u5c06 MathFunctions.h \u548c MathFunctions.cc \u6587\u4ef6\u79fb\u52a8\u5230 math \u76ee\u5f55\u4e0b\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo3</span>\n    <span class=\"o\">|</span>\n    <span class=\"o\">+---</span> <span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span>\n    <span class=\"o\">|</span>\n    <span class=\"o\">+---</span> <span class=\"n\">math</span><span class=\"o\">/</span>\n          <span class=\"o\">|</span>\n          <span class=\"o\">+---</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">cc</span>\n          <span class=\"o\">|</span>\n          <span class=\"o\">+---</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">h</span>\n</code></pre></div>\n<p>\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u9700\u8981\u5206\u522b\u5728\u9879\u76ee\u6839\u76ee\u5f55 Demo3 \u548c math \u76ee\u5f55\u91cc\u5404\u7f16\u5199\u4e00\u4e2a CMakeLists.txt \u6587\u4ef6\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5c06 math \u76ee\u5f55\u91cc\u7684\u6587\u4ef6\u7f16\u8bd1\u6210\u9759\u6001\u5e93\u518d\u7531 main \u51fd\u6570\u8c03\u7528\u3002\n\u6839\u76ee\u5f55\u4e2d\u7684 CMakeLists.txt \uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># CMake \u6700\u4f4e\u7248\u672c\u53f7\u8981\u6c42</span>\n<span class=\"n\">cmake_minimum_required</span> <span class=\"p\">(</span><span class=\"n\">VERSION</span> <span class=\"mf\">2.8</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u9879\u76ee\u4fe1\u606f</span>\n<span class=\"n\">project</span> <span class=\"p\">(</span><span class=\"n\">Demo3</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6</span>\n<span class=\"cp\"># \u5e76\u5c06\u540d\u79f0\u4fdd\u5b58\u5230 DIR_SRCS \u53d8\u91cf</span>\n<span class=\"n\">aux_source_directory</span><span class=\"p\">(.</span> <span class=\"n\">DIR_SRCS</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6dfb\u52a0 math \u5b50\u76ee\u5f55</span>\n<span class=\"n\">add_subdirectory</span><span class=\"p\">(</span><span class=\"n\">math</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6307\u5b9a\u751f\u6210\u76ee\u6807 </span>\n<span class=\"n\">add_executable</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6dfb\u52a0\u94fe\u63a5\u5e93</span>\n<span class=\"n\">target_link_libraries</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"n\">MathFunctions</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u8be5\u6587\u4ef6\u6dfb\u52a0\u4e86\u4e0b\u9762\u7684\u5185\u5bb9: \u7b2c3\u884c\uff0c\u4f7f\u7528\u547d\u4ee4 add_subdirectory \u6307\u660e\u672c\u9879\u76ee\u5305\u542b\u4e00\u4e2a\u5b50\u76ee\u5f55 math\uff0c\u8fd9\u6837 math \u76ee\u5f55\u4e0b\u7684 CMakeLists.txt \u6587\u4ef6\u548c\u6e90\u4ee3\u7801\u4e5f\u4f1a\u88ab\u5904\u7406 \u3002\u7b2c6\u884c\uff0c\u4f7f\u7528\u547d\u4ee4 target_link_libraries \u6307\u660e\u53ef\u6267\u884c\u6587\u4ef6 main \u9700\u8981\u8fde\u63a5\u4e00\u4e2a\u540d\u4e3a MathFunctions \u7684\u94fe\u63a5\u5e93 \u3002\n\u5b50\u76ee\u5f55\u4e2d\u7684 CMakeLists.txt\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6</span>\n<span class=\"cp\"># \u5e76\u5c06\u540d\u79f0\u4fdd\u5b58\u5230 DIR_LIB_SRCS \u53d8\u91cf</span>\n<span class=\"n\">aux_source_directory</span><span class=\"p\">(.</span> <span class=\"n\">DIR_LIB_SRCS</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u751f\u6210\u94fe\u63a5\u5e93</span>\n<span class=\"n\">add_library</span> <span class=\"p\">(</span><span class=\"n\">MathFunctions</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">DIR_LIB_SRCS</span><span class=\"p\">})</span>\n</code></pre></div>\n<p>\u5728\u8be5\u6587\u4ef6\u4e2d\u4f7f\u7528\u547d\u4ee4 add_library \u5c06 src \u76ee\u5f55\u4e2d\u7684\u6e90\u6587\u4ef6\u7f16\u8bd1\u4e3a\u9759\u6001\u94fe\u63a5\u5e93\u3002\n\u81ea\u5b9a\u4e49\u7f16\u8bd1\u9009\u9879</p>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo4\" target=\"_blank\" rel=\"nofollow\">Demo4</a>\u3002</h5>\n<p>CMake \u5141\u8bb8\u4e3a\u9879\u76ee\u589e\u52a0\u7f16\u8bd1\u9009\u9879\uff0c\u4ece\u800c\u53ef\u4ee5\u6839\u636e\u7528\u6237\u7684\u73af\u5883\u548c\u9700\u6c42\u9009\u62e9\u6700\u5408\u9002\u7684\u7f16\u8bd1\u65b9\u6848\u3002\n\u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06 MathFunctions \u5e93\u8bbe\u4e3a\u4e00\u4e2a\u53ef\u9009\u7684\u5e93\uff0c\u5982\u679c\u8be5\u9009\u9879\u4e3a ON \uff0c\u5c31\u4f7f\u7528\u8be5\u5e93\u5b9a\u4e49\u7684\u6570\u5b66\u51fd\u6570\u6765\u8fdb\u884c\u8fd0\u7b97\u3002\u5426\u5219\u5c31\u8c03\u7528\u6807\u51c6\u5e93\u4e2d\u7684\u6570\u5b66\u51fd\u6570\u5e93\u3002\n\u4fee\u6539 CMakeLists \u6587\u4ef6</p>\n<p>\u6211\u4eec\u8981\u505a\u7684\u7b2c\u4e00\u6b65\u662f\u5728\u9876\u5c42\u7684 CMakeLists.txt \u6587\u4ef6\u4e2d\u6dfb\u52a0\u8be5\u9009\u9879\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># CMake \u6700\u4f4e\u7248\u672c\u53f7\u8981\u6c42</span>\n<span class=\"n\">cmake_minimum_required</span> <span class=\"p\">(</span><span class=\"n\">VERSION</span> <span class=\"mf\">2.8</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u9879\u76ee\u4fe1\u606f</span>\n<span class=\"n\">project</span> <span class=\"p\">(</span><span class=\"n\">Demo4</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u52a0\u5165\u4e00\u4e2a\u914d\u7f6e\u5934\u6587\u4ef6\uff0c\u7528\u4e8e\u5904\u7406 CMake \u5bf9\u6e90\u7801\u7684\u8bbe\u7f6e</span>\n<span class=\"n\">configure_file</span> <span class=\"p\">(</span>\n  <span class=\"s\">&quot;${PROJECT_SOURCE_DIR}/config.h.in&quot;</span>\n  <span class=\"s\">&quot;${PROJECT_BINARY_DIR}/config.h&quot;</span>\n  <span class=\"p\">)</span>\n\n<span class=\"cp\"># \u662f\u5426\u4f7f\u7528\u81ea\u5df1\u7684 MathFunctions \u5e93</span>\n<span class=\"n\">option</span> <span class=\"p\">(</span><span class=\"n\">USE_MYMATH</span>\n       <span class=\"s\">&quot;Use provided math implementation&quot;</span> <span class=\"n\">ON</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u662f\u5426\u52a0\u5165 MathFunctions \u5e93</span>\n<span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">USE_MYMATH</span><span class=\"p\">)</span>\n  <span class=\"n\">include_directories</span> <span class=\"p\">(</span><span class=\"s\">&quot;${PROJECT_SOURCE_DIR}/math&quot;</span><span class=\"p\">)</span>\n  <span class=\"n\">add_subdirectory</span> <span class=\"p\">(</span><span class=\"n\">math</span><span class=\"p\">)</span>  \n  <span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">EXTRA_LIBS</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">EXTRA_LIBS</span><span class=\"p\">}</span> <span class=\"n\">MathFunctions</span><span class=\"p\">)</span>\n<span class=\"n\">endif</span> <span class=\"p\">(</span><span class=\"n\">USE_MYMATH</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e90\u6587\u4ef6</span>\n<span class=\"cp\"># \u5e76\u5c06\u540d\u79f0\u4fdd\u5b58\u5230 DIR_SRCS \u53d8\u91cf</span>\n<span class=\"n\">aux_source_directory</span><span class=\"p\">(.</span> <span class=\"n\">DIR_SRCS</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6307\u5b9a\u751f\u6210\u76ee\u6807</span>\n<span class=\"n\">add_executable</span><span class=\"p\">(</span><span class=\"n\">Demo</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">DIR_SRCS</span><span class=\"p\">})</span>\n<span class=\"n\">target_link_libraries</span> <span class=\"p\">(</span><span class=\"n\">Demo</span>  <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">EXTRA_LIBS</span><span class=\"p\">})</span>\n</code></pre></div>\n<p>\u5176\u4e2d\uff1a</p>\n<p>\u7b2c7\u884c\u7684 configure_file \u547d\u4ee4\u7528\u4e8e\u52a0\u5165\u4e00\u4e2a\u914d\u7f6e\u5934\u6587\u4ef6 config.h \uff0c\u8fd9\u4e2a\u6587\u4ef6\u7531 CMake \u4ece config.h.in \u751f\u6210\uff0c\u901a\u8fc7\u8fd9\u6837\u7684\u673a\u5236\uff0c\u5c06\u53ef\u4ee5\u901a\u8fc7\u9884\u5b9a\u4e49\u4e00\u4e9b\u53c2\u6570\u548c\u53d8\u91cf\u6765\u63a7\u5236\u4ee3\u7801\u7684\u751f\u6210\u3002</p>\n<p>\u7b2c13\u884c\u7684 option \u547d\u4ee4\u6dfb\u52a0\u4e86\u4e00\u4e2a USE_MYMATH \u9009\u9879\uff0c\u5e76\u4e14\u9ed8\u8ba4\u503c\u4e3a ON \u3002</p>\n<p>\u7b2c17\u884c\u6839\u636e USE_MYMATH \u53d8\u91cf\u7684\u503c\u6765\u51b3\u5b9a\u662f\u5426\u4f7f\u7528\u6211\u4eec\u81ea\u5df1\u7f16\u5199\u7684 MathFunctions \u5e93\u3002</p>\n<p>\u4fee\u6539 main.cc \u6587\u4ef6</p>\n<p>\u4e4b\u540e\u4fee\u6539 main.cc \u6587\u4ef6\uff0c\u8ba9\u5176\u6839\u636e USE_MYMATH \u7684\u9884\u5b9a\u4e49\u503c\u6765\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u6807\u51c6\u5e93\u8fd8\u662f MathFunctions \u5e93\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#include </span>\n<span class=\"cp\">#include </span>\n<span class=\"cp\">#include &quot;config.h&quot;</span>\n\n<span class=\"cp\">#ifdef USE_MYMATH</span>\n  <span class=\"cp\">#include &quot;math/MathFunctions.h&quot;</span>\n<span class=\"cp\">#else</span>\n  <span class=\"cp\">#include </span>\n<span class=\"cp\">#endif</span>\n\n<span class=\"kt\">int</span> <span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">argc</span><span class=\"p\">,</span> <span class=\"kt\">char</span> <span class=\"o\">*</span><span class=\"n\">argv</span><span class=\"p\">[])</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">argc</span> <span class=\"o\">&lt;</span> <span class=\"mi\">3</span><span class=\"p\">){</span>\n        <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Usage: %s base exponent </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]);</span>\n        <span class=\"k\">return</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"kt\">double</span> <span class=\"n\">base</span> <span class=\"o\">=</span> <span class=\"n\">atof</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]);</span>\n    <span class=\"kt\">int</span> <span class=\"n\">exponent</span> <span class=\"o\">=</span> <span class=\"n\">atoi</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]);</span>\n\n<span class=\"cp\">#ifdef USE_MYMATH</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use our own Math library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">power</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#else</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use the standard library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">pow</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;%g ^ %d is %g</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">,</span> <span class=\"n\">result</span><span class=\"p\">);</span>\n    <span class=\"k\">return</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<h4>\u7f16\u5199 config.h.in \u6587\u4ef6</h4>\n<p>\u4e0a\u9762\u7684\u7a0b\u5e8f\u503c\u5f97\u6ce8\u610f\u7684\u662f\u7b2c2\u884c\uff0c\u8fd9\u91cc\u5f15\u7528\u4e86\u4e00\u4e2a config.h \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u9884\u5b9a\u4e49\u4e86 USE_MYMATH \u7684\u503c\u3002\u4f46\u6211\u4eec\u5e76\u4e0d\u76f4\u63a5\u7f16\u5199\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4e3a\u4e86\u65b9\u4fbf\u4ece CMakeLists.txt \u4e2d\u5bfc\u5165\u914d\u7f6e\uff0c\u6211\u4eec\u7f16\u5199\u4e00\u4e2a config.h.in \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#cmakedefine USE_MYMATH</span>\n</code></pre></div>\n<p>\u8fd9\u6837 CMake \u4f1a\u81ea\u52a8\u6839\u636e CMakeLists \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u8bbe\u7f6e\u81ea\u52a8\u751f\u6210 config.h \u6587\u4ef6\u3002\n\u7f16\u8bd1\u9879\u76ee</p>\n<p>\u73b0\u5728\u7f16\u8bd1\u4e00\u4e0b\u8fd9\u4e2a\u9879\u76ee\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u4ea4\u4e92\u5f0f\u7684\u9009\u62e9\u8be5\u53d8\u91cf\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528 ccmake \u547d\u4ee4 2 \n2\u4e5f\u53ef\u4ee5\u4f7f\u7528 cmake -i \u547d\u4ee4\uff0c\u8be5\u547d\u4ee4\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u4f1a\u8bdd\u5f0f\u7684\u4ea4\u4e92\u5f0f\u914d\u7f6e\u754c\u9762\u3002</p>\n<p><img src=\"http://static.oschina.net/uploads/img/201507/11133724_OAoz.png\" width=\"853\" height=\"493\" style=\"cursor: pointer;\"></p>\n<h3>CMake\u7684\u4ea4\u4e92\u5f0f\u914d\u7f6e\u754c\u9762</h3>\n<p>\u4ece\u4e2d\u53ef\u4ee5\u627e\u5230\u521a\u521a\u5b9a\u4e49\u7684 USE_MYMATH \u9009\u9879\uff0c\u6309\u952e\u76d8\u7684\u65b9\u5411\u952e\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u9009\u9879\u7a97\u53e3\u95f4\u8df3\u8f6c\uff0c\u6309\u4e0b enter \u952e\u53ef\u4ee5\u4fee\u6539\u8be5\u9009\u9879\u3002\u4fee\u6539\u5b8c\u6210\u540e\u53ef\u4ee5\u6309\u4e0b c \u9009\u9879\u5b8c\u6210\u914d\u7f6e\uff0c\u4e4b\u540e\u518d\u6309 g \u952e\u786e\u8ba4\u751f\u6210 Makefile \u3002ccmake \u7684\u5176\u4ed6\u64cd\u4f5c\u53ef\u4ee5\u53c2\u8003\u7a97\u53e3\u4e0b\u65b9\u7ed9\u51fa\u7684\u6307\u4ee4\u63d0\u793a\u3002\n\u6211\u4eec\u53ef\u4ee5\u8bd5\u8bd5\u5206\u522b\u5c06 USE_MYMATH \u8bbe\u4e3a ON \u548c OFF \u5f97\u5230\u7684\u7ed3\u679c\uff1a\nUSE_MYMATH \u4e3a ON</p>\n<h5>\u8fd0\u884c\u7ed3\u679c\uff1a</h5>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo4</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo</span>\n<span class=\"n\">Now</span> <span class=\"n\">we</span> <span class=\"n\">use</span> <span class=\"n\">our</span> <span class=\"n\">own</span> <span class=\"n\">MathFunctions</span> <span class=\"n\">library</span><span class=\"p\">.</span> \n <span class=\"mi\">7</span> <span class=\"o\">^</span> <span class=\"mi\">3</span> <span class=\"o\">=</span> <span class=\"mf\">343.000000</span>\n <span class=\"mi\">10</span> <span class=\"o\">^</span> <span class=\"mi\">5</span> <span class=\"o\">=</span> <span class=\"mf\">100000.000000</span>\n <span class=\"mi\">2</span> <span class=\"o\">^</span> <span class=\"mi\">10</span> <span class=\"o\">=</span> <span class=\"mf\">1024.000000</span>\n</code></pre></div>\n<p>\u6b64\u65f6 config.h \u7684\u5185\u5bb9\u4e3a\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#define USE_MYMATH</span>\n</code></pre></div>\n<p>USE_MYMATH \u4e3a OFF</p>\n<h5>\u8fd0\u884c\u7ed3\u679c\uff1a</h5>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo4</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo</span>\n<span class=\"n\">Now</span> <span class=\"n\">we</span> <span class=\"n\">use</span> <span class=\"n\">the</span> <span class=\"n\">standard</span> <span class=\"n\">library</span><span class=\"p\">.</span> \n <span class=\"mi\">7</span> <span class=\"o\">^</span> <span class=\"mi\">3</span> <span class=\"o\">=</span> <span class=\"mf\">343.000000</span>\n <span class=\"mi\">10</span> <span class=\"o\">^</span> <span class=\"mi\">5</span> <span class=\"o\">=</span> <span class=\"mf\">100000.000000</span>\n <span class=\"mi\">2</span> <span class=\"o\">^</span> <span class=\"mi\">10</span> <span class=\"o\">=</span> <span class=\"mf\">1024.000000</span>\n</code></pre></div>\n<p>\u6b64\u65f6 config.h \u7684\u5185\u5bb9\u4e3a\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cm\">/* #undef USE_MYMATH */</span>\n</code></pre></div>\n<h5>\u5b89\u88c5\u548c\u6d4b\u8bd5</h5>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo5\" target=\"_blank\" rel=\"nofollow\">Demo5</a>\u3002</h5>\n<p>CMake \u4e5f\u53ef\u4ee5\u6307\u5b9a\u5b89\u88c5\u89c4\u5219\uff0c\u4ee5\u53ca\u6dfb\u52a0\u6d4b\u8bd5\u3002\u8fd9\u4e24\u4e2a\u529f\u80fd\u5206\u522b\u53ef\u4ee5\u901a\u8fc7\u5728\u4ea7\u751f Makefile \u540e\u4f7f\u7528 make install \u548c make test \u6765\u6267\u884c\u3002\u5728\u4ee5\u524d\u7684 GNU Makefile \u91cc\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e3a\u6b64\u7f16\u5199 install \u548c test \u4e24\u4e2a\u4f2a\u76ee\u6807\u548c\u76f8\u5e94\u7684\u89c4\u5219\uff0c\u4f46\u5728 CMake \u91cc\uff0c\u8fd9\u6837\u7684\u5de5\u4f5c\u540c\u6837\u53ea\u9700\u8981\u7b80\u5355\u7684\u8c03\u7528\u51e0\u6761\u547d\u4ee4\u3002\n\u5b9a\u5236\u5b89\u88c5\u89c4\u5219</p>\n<p>\u9996\u5148\u5148\u5728 math/CMakeLists.txt \u6587\u4ef6\u91cc\u6dfb\u52a0\u4e0b\u9762\u4e24\u884c\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u6307\u5b9a MathFunctions \u5e93\u7684\u5b89\u88c5\u8def\u5f84</span>\n<span class=\"n\">install</span> <span class=\"p\">(</span><span class=\"n\">TARGETS</span> <span class=\"n\">MathFunctions</span> <span class=\"n\">DESTINATION</span> <span class=\"n\">bin</span><span class=\"p\">)</span>\n<span class=\"n\">install</span> <span class=\"p\">(</span><span class=\"n\">FILES</span> <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">h</span> <span class=\"n\">DESTINATION</span> <span class=\"n\">include</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u6307\u660e MathFunctions \u5e93\u7684\u5b89\u88c5\u8def\u5f84\u3002\u4e4b\u540e\u540c\u6837\u4fee\u6539\u6839\u76ee\u5f55\u7684 CMakeLists \u6587\u4ef6\uff0c\u5728\u672b\u5c3e\u6dfb\u52a0\u4e0b\u9762\u51e0\u884c\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u6307\u5b9a\u5b89\u88c5\u8def\u5f84</span>\n<span class=\"n\">install</span> <span class=\"p\">(</span><span class=\"n\">TARGETS</span> <span class=\"n\">Demo</span> <span class=\"n\">DESTINATION</span> <span class=\"n\">bin</span><span class=\"p\">)</span>\n<span class=\"n\">install</span> <span class=\"p\">(</span><span class=\"n\">FILES</span> <span class=\"s\">&quot;${PROJECT_BINARY_DIR}/config.h&quot;</span>\n         <span class=\"n\">DESTINATION</span> <span class=\"n\">include</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u901a\u8fc7\u4e0a\u9762\u7684\u5b9a\u5236\uff0c\u751f\u6210\u7684 Demo \u6587\u4ef6\u548c MathFunctions \u51fd\u6570\u5e93 libMathFunctions.o \u6587\u4ef6\u5c06\u4f1a\u88ab\u590d\u5236\u5230 /usr/local/bin \u4e2d\uff0c\u800c MathFunctions.h \u548c\u751f\u6210\u7684 config.h \u6587\u4ef6\u5219\u4f1a\u88ab\u590d\u5236\u5230 /usr/local/include \u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u4e00\u4e0b3\n3\u987a\u5e26\u4e00\u63d0\u7684\u662f\uff0c\u8fd9\u91cc\u7684 /usr/local/ \u662f\u9ed8\u8ba4\u5b89\u88c5\u5230\u7684\u6839\u76ee\u5f55\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 CMAKE_INSTALL_PREFIX \u53d8\u91cf\u7684\u503c\u6765\u6307\u5b9a\u8fd9\u4e9b\u6587\u4ef6\u5e94\u8be5\u62f7\u8d1d\u5230\u54ea\u4e2a\u6839\u76ee\u5f55\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo5</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">sudo</span> <span class=\"n\">make</span> <span class=\"n\">install</span>\n<span class=\"p\">[</span> <span class=\"mi\">50</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Built</span> <span class=\"n\">target</span> <span class=\"n\">MathFunctions</span>\n<span class=\"p\">[</span><span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Built</span> <span class=\"n\">target</span> <span class=\"n\">Demo</span>\n<span class=\"n\">Install</span> <span class=\"n\">the</span> <span class=\"n\">project</span><span class=\"p\">...</span>\n<span class=\"o\">--</span> <span class=\"n\">Install</span> <span class=\"nl\">configuration</span><span class=\"p\">:</span> <span class=\"s\">&quot;&quot;</span>\n<span class=\"o\">--</span> <span class=\"nl\">Installing</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">Demo</span>\n<span class=\"o\">--</span> <span class=\"nl\">Installing</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">config</span><span class=\"p\">.</span><span class=\"n\">h</span>\n<span class=\"o\">--</span> <span class=\"nl\">Installing</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">libMathFunctions</span><span class=\"p\">.</span><span class=\"n\">a</span>\n<span class=\"o\">--</span> <span class=\"n\">Up</span><span class=\"o\">-</span><span class=\"n\">to</span><span class=\"o\">-</span><span class=\"nl\">date</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">h</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo5</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">ls</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">bin</span>\n<span class=\"n\">Demo</span>  <span class=\"n\">libMathFunctions</span><span class=\"p\">.</span><span class=\"n\">a</span>\n<span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo5</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">ls</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">include</span>\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"n\">h</span>  <span class=\"n\">MathFunctions</span><span class=\"p\">.</span><span class=\"n\">h</span>\n</code></pre></div>\n<h4>\u4e3a\u5de5\u7a0b\u6dfb\u52a0\u6d4b\u8bd5</h4>\n<p>\u6dfb\u52a0\u6d4b\u8bd5\u540c\u6837\u5f88\u7b80\u5355\u3002CMake \u63d0\u4f9b\u4e86\u4e00\u4e2a\u79f0\u4e3a CTest \u7684\u6d4b\u8bd5\u5de5\u5177\u3002\u6211\u4eec\u8981\u505a\u7684\u53ea\u662f\u5728\u9879\u76ee\u6839\u76ee\u5f55\u7684 CMakeLists \u6587\u4ef6\u4e2d\u8c03\u7528\u4e00\u7cfb\u5217\u7684 add_test \u547d\u4ee4\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u542f\u7528\u6d4b\u8bd5</span>\n<span class=\"n\">enable_testing</span><span class=\"p\">()</span>\n\n<span class=\"cp\"># \u6d4b\u8bd5\u7a0b\u5e8f\u662f\u5426\u6210\u529f\u8fd0\u884c</span>\n<span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_run</span> <span class=\"n\">Demo</span> <span class=\"mi\">5</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6d4b\u8bd5\u5e2e\u52a9\u4fe1\u606f\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u63d0\u793a</span>\n<span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_usage</span> <span class=\"n\">Demo</span><span class=\"p\">)</span>\n<span class=\"n\">set_tests_properties</span> <span class=\"p\">(</span><span class=\"n\">test_usage</span>\n  <span class=\"n\">PROPERTIES</span> <span class=\"n\">PASS_REGULAR_EXPRESSION</span> <span class=\"s\">&quot;Usage: .* base exponent&quot;</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6d4b\u8bd5 5 \u7684\u5e73\u65b9</span>\n<span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_5_2</span> <span class=\"n\">Demo</span> <span class=\"mi\">5</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"n\">set_tests_properties</span> <span class=\"p\">(</span><span class=\"n\">test_5_2</span>\n <span class=\"n\">PROPERTIES</span> <span class=\"n\">PASS_REGULAR_EXPRESSION</span> <span class=\"s\">&quot;is 25&quot;</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6d4b\u8bd5 10 \u7684 5 \u6b21\u65b9</span>\n<span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_10_5</span> <span class=\"n\">Demo</span> <span class=\"mi\">10</span> <span class=\"mi\">5</span><span class=\"p\">)</span>\n<span class=\"n\">set_tests_properties</span> <span class=\"p\">(</span><span class=\"n\">test_10_5</span>\n <span class=\"n\">PROPERTIES</span> <span class=\"n\">PASS_REGULAR_EXPRESSION</span> <span class=\"s\">&quot;is 100000&quot;</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u6d4b\u8bd5 2 \u7684 10 \u6b21\u65b9</span>\n<span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_2_10</span> <span class=\"n\">Demo</span> <span class=\"mi\">2</span> <span class=\"mi\">10</span><span class=\"p\">)</span>\n<span class=\"n\">set_tests_properties</span> <span class=\"p\">(</span><span class=\"n\">test_2_10</span>\n <span class=\"n\">PROPERTIES</span> <span class=\"n\">PASS_REGULAR_EXPRESSION</span> <span class=\"s\">&quot;is 1024&quot;</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u5305\u542b\u4e86\u56db\u4e2a\u6d4b\u8bd5\u3002\u7b2c\u4e00\u4e2a\u6d4b\u8bd5 test_run \u7528\u6765\u6d4b\u8bd5\u7a0b\u5e8f\u662f\u5426\u6210\u529f\u8fd0\u884c\u5e76\u8fd4\u56de 0 \u503c\u3002\u5269\u4e0b\u7684\u4e09\u4e2a\u6d4b\u8bd5\u5206\u522b\u7528\u6765\u6d4b\u8bd5 5 \u7684 \u5e73\u65b9\u300110 \u7684 5 \u6b21\u65b9\u30012 \u7684 10 \u6b21\u65b9\u662f\u5426\u90fd\u80fd\u5f97\u5230\u6b63\u786e\u7684\u7ed3\u679c\u3002\u5176\u4e2d PASS_REGULAR_EXPRESSION \u7528\u6765\u6d4b\u8bd5\u8f93\u51fa\u662f\u5426\u5305\u542b\u540e\u9762\u8ddf\u7740\u7684\u5b57\u7b26\u4e32\u3002\n\u8ba9\u6211\u4eec\u770b\u770b\u6d4b\u8bd5\u7684\u7ed3\u679c\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo5</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">make</span> <span class=\"n\">test</span>\n<span class=\"n\">Running</span> <span class=\"n\">tests</span><span class=\"p\">...</span>\n<span class=\"n\">Test</span> <span class=\"n\">project</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo5</span>\n    <span class=\"n\">Start</span> <span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"n\">test_run</span>\n<span class=\"mi\">1</span><span class=\"o\">/</span><span class=\"mi\">4</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"n\">test_run</span> <span class=\"p\">.........................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">0.00</span> <span class=\"n\">sec</span>\n    <span class=\"n\">Start</span> <span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"n\">test_5_2</span>\n<span class=\"mi\">2</span><span class=\"o\">/</span><span class=\"mi\">4</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"n\">test_5_2</span> <span class=\"p\">.........................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">0.00</span> <span class=\"n\">sec</span>\n    <span class=\"n\">Start</span> <span class=\"mi\">3</span><span class=\"o\">:</span> <span class=\"n\">test_10_5</span>\n<span class=\"mi\">3</span><span class=\"o\">/</span><span class=\"mi\">4</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">3</span><span class=\"o\">:</span> <span class=\"n\">test_10_5</span> <span class=\"p\">........................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">0.00</span> <span class=\"n\">sec</span>\n    <span class=\"n\">Start</span> <span class=\"mi\">4</span><span class=\"o\">:</span> <span class=\"n\">test_2_10</span>\n<span class=\"mi\">4</span><span class=\"o\">/</span><span class=\"mi\">4</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"o\">:</span> <span class=\"n\">test_2_10</span> <span class=\"p\">........................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">0.00</span> <span class=\"n\">sec</span>\n\n<span class=\"mi\">100</span><span class=\"o\">%</span> <span class=\"n\">tests</span> <span class=\"n\">passed</span><span class=\"p\">,</span> <span class=\"mi\">0</span> <span class=\"n\">tests</span> <span class=\"n\">failed</span> <span class=\"n\">out</span> <span class=\"n\">of</span> <span class=\"mi\">4</span>\n\n<span class=\"n\">Total</span> <span class=\"n\">Test</span> <span class=\"n\">time</span> <span class=\"p\">(</span><span class=\"n\">real</span><span class=\"p\">)</span> <span class=\"o\">=</span>   <span class=\"mf\">0.01</span> <span class=\"n\">sec</span>\n</code></pre></div>\n<p>\u5982\u679c\u8981\u6d4b\u8bd5\u66f4\u591a\u7684\u8f93\u5165\u6570\u636e\uff0c\u50cf\u4e0a\u9762\u90a3\u6837\u4e00\u4e2a\u4e2a\u5199\u6d4b\u8bd5\u7528\u4f8b\u672a\u514d\u592a\u7e41\u7410\u3002\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u7f16\u5199\u5b8f\u6765\u5b9e\u73b0\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u5b9a\u4e49\u4e00\u4e2a\u5b8f\uff0c\u7528\u6765\u7b80\u5316\u6d4b\u8bd5\u5de5\u4f5c</span>\n<span class=\"n\">macro</span> <span class=\"p\">(</span><span class=\"n\">do_test</span> <span class=\"n\">arg1</span> <span class=\"n\">arg2</span> <span class=\"n\">result</span><span class=\"p\">)</span>\n  <span class=\"n\">add_test</span> <span class=\"p\">(</span><span class=\"n\">test_</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg1</span><span class=\"p\">}</span><span class=\"n\">_</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg2</span><span class=\"p\">}</span> <span class=\"n\">Demo</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg1</span><span class=\"p\">}</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg2</span><span class=\"p\">})</span>\n  <span class=\"n\">set_tests_properties</span> <span class=\"p\">(</span><span class=\"n\">test_</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg1</span><span class=\"p\">}</span><span class=\"n\">_</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">arg2</span><span class=\"p\">}</span>\n    <span class=\"n\">PROPERTIES</span> <span class=\"n\">PASS_REGULAR_EXPRESSION</span> <span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">result</span><span class=\"p\">})</span>\n<span class=\"n\">endmacro</span> <span class=\"p\">(</span><span class=\"n\">do_test</span><span class=\"p\">)</span>\n\n<span class=\"cp\"># \u4f7f\u7528\u8be5\u5b8f\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u6570\u636e\u6d4b\u8bd5</span>\n<span class=\"n\">do_test</span> <span class=\"p\">(</span><span class=\"mi\">5</span> <span class=\"mi\">2</span> <span class=\"s\">&quot;is 25&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">do_test</span> <span class=\"p\">(</span><span class=\"mi\">10</span> <span class=\"mi\">5</span> <span class=\"s\">&quot;is 100000&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">do_test</span> <span class=\"p\">(</span><span class=\"mi\">2</span> <span class=\"mi\">10</span> <span class=\"s\">&quot;is 1024&quot;</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u5173\u4e8e CTest \u7684\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\u53ef\u4ee5\u901a\u8fc7 man 1 ctest \u53c2\u8003 CTest \u7684\u6587\u6863\u3002\n\u652f\u6301 gdb</p>\n<p>\u8ba9 CMake \u652f\u6301 gdb \u7684\u8bbe\u7f6e\u4e5f\u5f88\u5bb9\u6613\uff0c\u53ea\u9700\u8981\u6307\u5b9a Debug \u6a21\u5f0f\u4e0b\u5f00\u542f -g \u9009\u9879\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">CMAKE_BUILD_TYPE</span> <span class=\"s\">&quot;Debug&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">CMAKE_CXX_FLAGS_DEBUG</span> <span class=\"s\">&quot;$ENV{CXXFLAGS} -O0 -Wall -g -ggdb&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">CMAKE_CXX_FLAGS_RELEASE</span> <span class=\"s\">&quot;$ENV{CXXFLAGS} -O3 -Wall&quot;</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u5bf9\u751f\u6210\u7684\u7a0b\u5e8f\u4f7f\u7528 gdb \u6765\u8c03\u8bd5\u3002\n\u6dfb\u52a0\u73af\u5883\u68c0\u67e5</p>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1a<a href=\"https://gitcafe.com/wzpan/cmake-demo/tree/master/Demo6\" target=\"_blank\" rel=\"nofollow\">Demo6</a>\u3002</h5>\n<p>\u6709\u65f6\u5019\u53ef\u80fd\u8981\u5bf9\u7cfb\u7edf\u73af\u5883\u505a\u70b9\u68c0\u67e5\uff0c\u4f8b\u5982\u8981\u4f7f\u7528\u4e00\u4e2a\u5e73\u53f0\u76f8\u5173\u7684\u7279\u6027\u7684\u65f6\u5019\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u68c0\u67e5\u7cfb\u7edf\u662f\u5426\u81ea\u5e26 pow \u51fd\u6570\u3002\u5982\u679c\u5e26\u6709 pow \u51fd\u6570\uff0c\u5c31\u4f7f\u7528\u5b83\uff1b\u5426\u5219\u4f7f\u7528\u6211\u4eec\u5b9a\u4e49\u7684 power \u51fd\u6570\u3002\n\u6dfb\u52a0 CheckFunctionExists \u5b8f</p>\n<p>\u9996\u5148\u5728\u9876\u5c42 CMakeLists \u6587\u4ef6\u4e2d\u6dfb\u52a0 CheckFunctionExists.cmake \u5b8f\uff0c\u5e76\u8c03\u7528 check_function_exists \u547d\u4ee4\u6d4b\u8bd5\u94fe\u63a5\u5668\u662f\u5426\u80fd\u591f\u5728\u94fe\u63a5\u9636\u6bb5\u627e\u5230 pow \u51fd\u6570\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u68c0\u67e5\u7cfb\u7edf\u662f\u5426\u652f\u6301 pow \u51fd\u6570</span>\n<span class=\"n\">include</span> <span class=\"p\">(</span><span class=\"err\">$</span><span class=\"p\">{</span><span class=\"n\">CMAKE_ROOT</span><span class=\"p\">}</span><span class=\"o\">/</span><span class=\"n\">Modules</span><span class=\"o\">/</span><span class=\"n\">CheckFunctionExists</span><span class=\"p\">.</span><span class=\"n\">cmake</span><span class=\"p\">)</span>\n<span class=\"n\">check_function_exists</span> <span class=\"p\">(</span><span class=\"n\">pow</span> <span class=\"n\">HAVE_POW</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u5c06\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u653e\u5728 configure_file \u547d\u4ee4\u524d\u3002\n\u9884\u5b9a\u4e49\u76f8\u5173\u5b8f\u53d8\u91cf</p>\n<p>\u63a5\u4e0b\u6765\u4fee\u6539 config.h.in \u6587\u4ef6\uff0c\u9884\u5b9a\u4e49\u76f8\u5173\u7684\u5b8f\u53d8\u91cf\u3002</p>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// does the platform provide pow function?</span>\n<span class=\"cp\">#cmakedefine HAVE_POW</span>\n</code></pre></div>\n<p>\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b8f\u548c\u51fd\u6570</p>\n<p>\u6700\u540e\u4e00\u6b65\u662f\u4fee\u6539 main.cc \uff0c\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b8f\u548c\u51fd\u6570\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#ifdef HAVE_POW</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use the standard library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">pow</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#else</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use our own Math library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">power</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n</code></pre></div>\n<h4>\u6dfb\u52a0\u7248\u672c\u53f7</h4>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1aDemo7\u3002</h5>\n<p>\u7ed9\u9879\u76ee\u6dfb\u52a0\u548c\u7ef4\u62a4\u7248\u672c\u53f7\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u7528\u6237\u4e86\u89e3\u6bcf\u4e2a\u7248\u672c\u7684\u7ef4\u62a4\u60c5\u51b5\uff0c\u5e76\u53ca\u65f6\u4e86\u89e3\u5f53\u524d\u6240\u7528\u7684\u7248\u672c\u662f\u5426\u8fc7\u65f6\uff0c\u6216\u662f\u5426\u53ef\u80fd\u51fa\u73b0\u4e0d\u517c\u5bb9\u7684\u60c5\u51b5\u3002\n\u9996\u5148\u4fee\u6539\u9876\u5c42 CMakeLists \u6587\u4ef6\uff0c\u5728 project \u547d\u4ee4\u4e4b\u540e\u52a0\u5165\u5982\u4e0b\u4e24\u884c\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">Demo_VERSION_MAJOR</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">Demo_VERSION_MINOR</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u5206\u522b\u6307\u5b9a\u5f53\u524d\u7684\u9879\u76ee\u7684\u4e3b\u7248\u672c\u53f7\u548c\u526f\u7248\u672c\u53f7\u3002\n\u4e4b\u540e\uff0c\u4e3a\u4e86\u5728\u4ee3\u7801\u4e2d\u83b7\u53d6\u7248\u672c\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u4fee\u6539 config.h.in \u6587\u4ef6\uff0c\u6dfb\u52a0\u4e24\u4e2a\u9884\u5b9a\u4e49\u53d8\u91cf\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"c1\">// the configured options and settings for Tutorial</span>\n<span class=\"cp\">#define Demo_VERSION_MAJOR @Demo_VERSION_MAJOR@</span>\n<span class=\"cp\">#define Demo_VERSION_MINOR @Demo_VERSION_MINOR@</span>\n</code></pre></div>\n<p>\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u4ee3\u7801\u4e2d\u6253\u5370\u7248\u672c\u4fe1\u606f\u4e86\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\">#include &lt;stdio.h&gt;</span>\n<span class=\"cp\">#include &lt;stdlib.h&gt;</span>\n<span class=\"cp\">#include &lt;math.h&gt;</span>\n<span class=\"cp\">#include &quot;config.h&quot;</span>\n<span class=\"cp\">#include &quot;math/MathFunctions.h&quot;</span>\n<span class=\"kt\">int</span> <span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">argc</span><span class=\"p\">,</span> <span class=\"kt\">char</span> <span class=\"o\">*</span><span class=\"n\">argv</span><span class=\"p\">[])</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">argc</span> <span class=\"o\">&lt;</span> <span class=\"mi\">3</span><span class=\"p\">){</span>\n        <span class=\"c1\">// print version info</span>\n        <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;%s Version %d.%d</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span>\n            <span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span>\n            <span class=\"n\">Demo_VERSION_MAJOR</span><span class=\"p\">,</span>\n            <span class=\"n\">Demo_VERSION_MINOR</span><span class=\"p\">);</span>\n        <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Usage: %s base exponent </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]);</span>\n        <span class=\"k\">return</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    <span class=\"kt\">double</span> <span class=\"n\">base</span> <span class=\"o\">=</span> <span class=\"n\">atof</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]);</span>\n    <span class=\"kt\">int</span> <span class=\"n\">exponent</span> <span class=\"o\">=</span> <span class=\"n\">atoi</span><span class=\"p\">(</span><span class=\"n\">argv</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]);</span>\n\n<span class=\"cp\">#if defined (HAVE_POW)</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use the standard library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">pow</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#else</span>\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;Now we use our own Math library. </span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">);</span>\n    <span class=\"kt\">double</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">power</span><span class=\"p\">(</span><span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n\n    <span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">&quot;%g ^ %d is %g</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">base</span><span class=\"p\">,</span> <span class=\"n\">exponent</span><span class=\"p\">,</span> <span class=\"n\">result</span><span class=\"p\">);</span>\n    <span class=\"k\">return</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n\n<span class=\"p\">}</span>\n</code></pre></div>\n<h4>\u751f\u6210\u5b89\u88c5\u5305</h4>\n<h5>\u672c\u8282\u5bf9\u5e94\u7684\u6e90\u4ee3\u7801\u6240\u5728\u76ee\u5f55\uff1aDemo8\u3002</h5>\n<p>\u672c\u8282\u5c06\u5b66\u4e60\u5982\u4f55\u914d\u7f6e\u751f\u6210\u5404\u79cd\u5e73\u53f0\u4e0a\u7684\u5b89\u88c5\u5305\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\u548c\u6e90\u7801\u5b89\u88c5\u5305\u3002\u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\uff0c\u6211\u4eec\u9700\u8981\u7528\u5230 CPack \uff0c\u5b83\u540c\u6837\u4e5f\u662f\u7531 CMake \u63d0\u4f9b\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u4e13\u95e8\u7528\u4e8e\u6253\u5305\u3002\n\u9996\u5148\u5728\u9876\u5c42\u7684 CMakeLists.txt \u6587\u4ef6\u5c3e\u90e8\u6dfb\u52a0\u4e0b\u9762\u51e0\u884c\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"cp\"># \u6784\u5efa\u4e00\u4e2a CPack \u5b89\u88c5\u5305</span>\n<span class=\"n\">include</span> <span class=\"p\">(</span><span class=\"n\">InstallRequiredSystemLibraries</span><span class=\"p\">)</span>\n<span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">CPACK_RESOURCE_FILE_LICENSE</span>\n  <span class=\"s\">&quot;${CMAKE_CURRENT_SOURCE_DIR}/License.txt&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">CPACK_PACKAGE_VERSION_MAJOR</span> <span class=\"s\">&quot;${Demo_VERSION_MAJOR}&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">set</span> <span class=\"p\">(</span><span class=\"n\">CPACK_PACKAGE_VERSION_MINOR</span> <span class=\"s\">&quot;${Demo_VERSION_MINOR}&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">include</span> <span class=\"p\">(</span><span class=\"n\">CPack</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u505a\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u5de5\u4f5c\uff1a\n\u5bfc\u5165 InstallRequiredSystemLibraries \u6a21\u5757\uff0c\u4ee5\u4fbf\u4e4b\u540e\u5bfc\u5165 CPack \u6a21\u5757\uff1b</p>\n<p>\u8bbe\u7f6e\u4e00\u4e9b CPack \u76f8\u5173\u53d8\u91cf\uff0c\u5305\u62ec\u7248\u6743\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f\uff0c\u5176\u4e2d\u7248\u672c\u4fe1\u606f\u7528\u4e86\u4e0a\u4e00\u8282\u5b9a\u4e49\u7684\u7248\u672c\u53f7\uff1b</p>\n<p>\u5bfc\u5165 CPack \u6a21\u5757\u3002</p>\n<p>\u63a5\u4e0b\u6765\u7684\u5de5\u4f5c\u662f\u50cf\u5f80\u5e38\u4e00\u6837\u6784\u5efa\u5de5\u7a0b\uff0c\u5e76\u6267\u884c cpack \u547d\u4ee4\u3002\n\u751f\u6210\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">cpack</span> <span class=\"o\">-</span><span class=\"n\">C</span> <span class=\"n\">CPackConfig</span><span class=\"p\">.</span><span class=\"n\">cmake</span>\n</code></pre></div>\n<p>\u751f\u6210\u6e90\u7801\u5b89\u88c5\u5305</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">cpack</span> <span class=\"o\">-</span><span class=\"n\">C</span> <span class=\"n\">CPackSourceConfig</span><span class=\"p\">.</span><span class=\"n\">cmake</span>\n</code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u8bd5\u4e00\u4e0b\u3002\u5728\u751f\u6210\u9879\u76ee\u540e\uff0c\u6267\u884c cpack -C CPackConfig.cmake \u547d\u4ee4\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo8</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">cpack</span> <span class=\"o\">-</span><span class=\"n\">C</span> <span class=\"n\">CPackSourceConfig</span><span class=\"p\">.</span><span class=\"n\">cmake</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span> <span class=\"n\">using</span> <span class=\"n\">STGZ</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Install</span> <span class=\"n\">projects</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Run</span> <span class=\"n\">preinstall</span> <span class=\"n\">target</span> <span class=\"k\">for</span><span class=\"o\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Install</span> <span class=\"nl\">project</span><span class=\"p\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"nl\">package</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">sh</span> <span class=\"n\">generated</span><span class=\"p\">.</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span> <span class=\"n\">using</span> <span class=\"n\">TGZ</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Install</span> <span class=\"n\">projects</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Run</span> <span class=\"n\">preinstall</span> <span class=\"n\">target</span> <span class=\"k\">for</span><span class=\"o\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Install</span> <span class=\"nl\">project</span><span class=\"p\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"nl\">package</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">tar</span><span class=\"p\">.</span><span class=\"n\">gz</span> <span class=\"n\">generated</span><span class=\"p\">.</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span> <span class=\"n\">using</span> <span class=\"n\">TZ</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Install</span> <span class=\"n\">projects</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Run</span> <span class=\"n\">preinstall</span> <span class=\"n\">target</span> <span class=\"k\">for</span><span class=\"o\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"n\">Install</span> <span class=\"nl\">project</span><span class=\"p\">:</span> <span class=\"n\">Demo8</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"n\">Create</span> <span class=\"n\">package</span>\n<span class=\"nl\">CPack</span><span class=\"p\">:</span> <span class=\"o\">-</span> <span class=\"nl\">package</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">tar</span><span class=\"p\">.</span><span class=\"n\">Z</span> <span class=\"n\">generated</span><span class=\"p\">.</span>\n</code></pre></div>\n<p>\u6b64\u65f6\u4f1a\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa 3 \u4e2a\u4e0d\u540c\u683c\u5f0f\u7684\u4e8c\u8fdb\u5236\u5305\u6587\u4ef6\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo8</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">ls</span> <span class=\"n\">Demo8</span><span class=\"o\">-*</span>\n<span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">sh</span>  <span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">tar</span><span class=\"p\">.</span><span class=\"n\">gz</span>  <span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">tar</span><span class=\"p\">.</span><span class=\"n\">Z</span>\n</code></pre></div>\n<p>\u8fd9 3 \u4e2a\u4e8c\u8fdb\u5236\u5305\u6587\u4ef6\u6240\u5305\u542b\u7684\u5185\u5bb9\u662f\u5b8c\u5168\u76f8\u540c\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u5176\u4e2d\u4e00\u4e2a\u3002\u6b64\u65f6\u4f1a\u51fa\u73b0\u4e00\u4e2a\u7531 CPack \u81ea\u52a8\u751f\u6210\u7684\u4ea4\u4e92\u5f0f\u5b89\u88c5\u754c\u9762\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo8</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"n\">sh</span> <span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"p\">.</span><span class=\"n\">sh</span> \n<span class=\"n\">Demo8</span> <span class=\"n\">Installer</span> <span class=\"nl\">Version</span><span class=\"p\">:</span> <span class=\"mf\">1.0.1</span><span class=\"p\">,</span> <span class=\"n\">Copyright</span> <span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"n\">Humanity</span>\n<span class=\"n\">This</span> <span class=\"n\">is</span> <span class=\"n\">a</span> <span class=\"n\">self</span><span class=\"o\">-</span><span class=\"n\">extracting</span> <span class=\"n\">archive</span><span class=\"p\">.</span>\n<span class=\"n\">The</span> <span class=\"n\">archive</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">extracted</span> <span class=\"nl\">to</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo8</span>\n\n<span class=\"n\">If</span> <span class=\"n\">you</span> <span class=\"n\">want</span> <span class=\"n\">to</span> <span class=\"n\">stop</span> <span class=\"n\">extracting</span><span class=\"p\">,</span> <span class=\"n\">please</span> <span class=\"n\">press</span> <span class=\"o\">&lt;</span><span class=\"n\">ctrl</span><span class=\"o\">-</span><span class=\"n\">C</span><span class=\"o\">&gt;</span><span class=\"p\">.</span>\n<span class=\"n\">The</span> <span class=\"n\">MIT</span> <span class=\"n\">License</span> <span class=\"p\">(</span><span class=\"n\">MIT</span><span class=\"p\">)</span>\n\n<span class=\"n\">Copyright</span> <span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"mi\">2013</span> <span class=\"n\">Joseph</span> <span class=\"n\">Pan</span><span class=\"p\">(</span><span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//hahack.com)</span>\n\n<span class=\"n\">Permission</span> <span class=\"n\">is</span> <span class=\"n\">hereby</span> <span class=\"n\">granted</span><span class=\"p\">,</span> <span class=\"n\">free</span> <span class=\"n\">of</span> <span class=\"n\">charge</span><span class=\"p\">,</span> <span class=\"n\">to</span> <span class=\"n\">any</span> <span class=\"n\">person</span> <span class=\"n\">obtaining</span> <span class=\"n\">a</span> <span class=\"n\">copy</span> <span class=\"n\">of</span>\n<span class=\"n\">this</span> <span class=\"n\">software</span> <span class=\"n\">and</span> <span class=\"n\">associated</span> <span class=\"n\">documentation</span> <span class=\"n\">files</span> <span class=\"p\">(</span><span class=\"n\">the</span> <span class=\"s\">&quot;Software&quot;</span><span class=\"p\">),</span> <span class=\"n\">to</span> <span class=\"n\">deal</span> <span class=\"n\">in</span>\n<span class=\"n\">the</span> <span class=\"n\">Software</span> <span class=\"n\">without</span> <span class=\"n\">restriction</span><span class=\"p\">,</span> <span class=\"n\">including</span> <span class=\"n\">without</span> <span class=\"n\">limitation</span> <span class=\"n\">the</span> <span class=\"n\">rights</span> <span class=\"n\">to</span>\n<span class=\"n\">use</span><span class=\"p\">,</span> <span class=\"n\">copy</span><span class=\"p\">,</span> <span class=\"n\">modify</span><span class=\"p\">,</span> <span class=\"n\">merge</span><span class=\"p\">,</span> <span class=\"n\">publish</span><span class=\"p\">,</span> <span class=\"n\">distribute</span><span class=\"p\">,</span> <span class=\"n\">sublicense</span><span class=\"p\">,</span> <span class=\"n\">and</span><span class=\"o\">/</span><span class=\"n\">or</span> <span class=\"n\">sell</span> <span class=\"n\">copies</span> <span class=\"n\">of</span>\n<span class=\"n\">the</span> <span class=\"n\">Software</span><span class=\"p\">,</span> <span class=\"n\">and</span> <span class=\"n\">to</span> <span class=\"n\">permit</span> <span class=\"n\">persons</span> <span class=\"n\">to</span> <span class=\"n\">whom</span> <span class=\"n\">the</span> <span class=\"n\">Software</span> <span class=\"n\">is</span> <span class=\"n\">furnished</span> <span class=\"n\">to</span> <span class=\"k\">do</span> <span class=\"n\">so</span><span class=\"p\">,</span>\n<span class=\"n\">subject</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">following</span> <span class=\"nl\">conditions</span><span class=\"p\">:</span>\n\n<span class=\"n\">The</span> <span class=\"n\">above</span> <span class=\"n\">copyright</span> <span class=\"n\">notice</span> <span class=\"n\">and</span> <span class=\"n\">this</span> <span class=\"n\">permission</span> <span class=\"n\">notice</span> <span class=\"n\">shall</span> <span class=\"n\">be</span> <span class=\"n\">included</span> <span class=\"n\">in</span> <span class=\"n\">all</span>\n<span class=\"n\">copies</span> <span class=\"n\">or</span> <span class=\"n\">substantial</span> <span class=\"n\">portions</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">Software</span><span class=\"p\">.</span>\n\n<span class=\"n\">THE</span> <span class=\"n\">SOFTWARE</span> <span class=\"n\">IS</span> <span class=\"n\">PROVIDED</span> <span class=\"s\">&quot;AS IS&quot;</span><span class=\"p\">,</span> <span class=\"n\">WITHOUT</span> <span class=\"n\">WARRANTY</span> <span class=\"n\">OF</span> <span class=\"n\">ANY</span> <span class=\"n\">KIND</span><span class=\"p\">,</span> <span class=\"n\">EXPRESS</span> <span class=\"n\">OR</span>\n<span class=\"n\">IMPLIED</span><span class=\"p\">,</span> <span class=\"n\">INCLUDING</span> <span class=\"n\">BUT</span> <span class=\"n\">NOT</span> <span class=\"n\">LIMITED</span> <span class=\"n\">TO</span> <span class=\"n\">THE</span> <span class=\"n\">WARRANTIES</span> <span class=\"n\">OF</span> <span class=\"n\">MERCHANTABILITY</span><span class=\"p\">,</span> <span class=\"n\">FITNESS</span>\n<span class=\"n\">FOR</span> <span class=\"n\">A</span> <span class=\"n\">PARTICULAR</span> <span class=\"n\">PURPOSE</span> <span class=\"n\">AND</span> <span class=\"n\">NONINFRINGEMENT</span><span class=\"p\">.</span> <span class=\"n\">IN</span> <span class=\"n\">NO</span> <span class=\"n\">EVENT</span> <span class=\"n\">SHALL</span> <span class=\"n\">THE</span> <span class=\"n\">AUTHORS</span> <span class=\"n\">OR</span>\n<span class=\"n\">COPYRIGHT</span> <span class=\"n\">HOLDERS</span> <span class=\"n\">BE</span> <span class=\"n\">LIABLE</span> <span class=\"n\">FOR</span> <span class=\"n\">ANY</span> <span class=\"n\">CLAIM</span><span class=\"p\">,</span> <span class=\"n\">DAMAGES</span> <span class=\"n\">OR</span> <span class=\"n\">OTHER</span> <span class=\"n\">LIABILITY</span><span class=\"p\">,</span> <span class=\"n\">WHETHER</span>\n<span class=\"n\">IN</span> <span class=\"n\">AN</span> <span class=\"n\">ACTION</span> <span class=\"n\">OF</span> <span class=\"n\">CONTRACT</span><span class=\"p\">,</span> <span class=\"n\">TORT</span> <span class=\"n\">OR</span> <span class=\"n\">OTHERWISE</span><span class=\"p\">,</span> <span class=\"n\">ARISING</span> <span class=\"n\">FROM</span><span class=\"p\">,</span> <span class=\"n\">OUT</span> <span class=\"n\">OF</span> <span class=\"n\">OR</span> <span class=\"n\">IN</span>\n<span class=\"n\">CONNECTION</span> <span class=\"n\">WITH</span> <span class=\"n\">THE</span> <span class=\"n\">SOFTWARE</span> <span class=\"n\">OR</span> <span class=\"n\">THE</span> <span class=\"n\">USE</span> <span class=\"n\">OR</span> <span class=\"n\">OTHER</span> <span class=\"n\">DEALINGS</span> <span class=\"n\">IN</span> <span class=\"n\">THE</span> <span class=\"n\">SOFTWARE</span><span class=\"p\">.</span>\n\n<span class=\"n\">Do</span> <span class=\"n\">you</span> <span class=\"n\">accept</span> <span class=\"n\">the</span> <span class=\"n\">license</span><span class=\"o\">?</span> <span class=\"p\">[</span><span class=\"n\">yN</span><span class=\"p\">]</span><span class=\"o\">:</span> \n<span class=\"n\">y</span>\n\n<span class=\"n\">By</span> <span class=\"k\">default</span> <span class=\"n\">the</span> <span class=\"n\">Demo8</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">installed</span> <span class=\"nl\">in</span><span class=\"p\">:</span>\n  <span class=\"s\">&quot;/home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux&quot;</span>\n<span class=\"n\">Do</span> <span class=\"n\">you</span> <span class=\"n\">want</span> <span class=\"n\">to</span> <span class=\"n\">include</span> <span class=\"n\">the</span> <span class=\"n\">subdirectory</span> <span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"o\">?</span>\n<span class=\"n\">Saying</span> <span class=\"n\">no</span> <span class=\"n\">will</span> <span class=\"n\">install</span> <span class=\"nl\">in</span><span class=\"p\">:</span> <span class=\"s\">&quot;/home/ehome/Documents/programming/C/power/Demo8&quot;</span> <span class=\"p\">[</span><span class=\"n\">Yn</span><span class=\"p\">]</span><span class=\"o\">:</span> \n<span class=\"n\">y</span>\n\n<span class=\"n\">Using</span> <span class=\"n\">target</span> <span class=\"nl\">directory</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ehome</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">programming</span><span class=\"o\">/</span><span class=\"n\">C</span><span class=\"o\">/</span><span class=\"n\">power</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span>\n<span class=\"n\">Extracting</span><span class=\"p\">,</span> <span class=\"n\">please</span> <span class=\"n\">wait</span><span class=\"p\">...</span>\n\n<span class=\"n\">Unpacking</span> <span class=\"n\">finished</span> <span class=\"n\">successfully</span>\n</code></pre></div>\n<p>\u5b8c\u6210\u540e\u63d0\u793a\u5b89\u88c5\u5230\u4e86 Demo8-1.0.1-Linux \u5b50\u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u53bb\u6267\u884c\u8be5\u7a0b\u5e8f\uff1a</p>\n<div class=\"highlight\"><pre><code><span class=\"p\">[</span><span class=\"n\">ehome</span><span class=\"err\">@</span><span class=\"n\">xman</span> <span class=\"n\">Demo8</span><span class=\"p\">]</span><span class=\"err\">$</span> <span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">Demo8</span><span class=\"o\">-</span><span class=\"mf\">1.0.1</span><span class=\"o\">-</span><span class=\"n\">Linux</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">Demo</span> <span class=\"mi\">5</span> <span class=\"mi\">2</span>\n<span class=\"n\">Now</span> <span class=\"n\">we</span> <span class=\"n\">use</span> <span class=\"n\">our</span> <span class=\"n\">own</span> <span class=\"n\">Math</span> <span class=\"n\">library</span><span class=\"p\">.</span> \n<span class=\"mi\">5</span> <span class=\"o\">^</span> <span class=\"mi\">2</span> <span class=\"n\">is</span> <span class=\"mi\">25</span>\n</code></pre></div>\n<p>\u5173\u4e8e CPack \u7684\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\u53ef\u4ee5\u901a\u8fc7 man 1 cpack \u53c2\u8003 CPack \u7684\u6587\u6863\u3002\n\u5c06\u5176\u4ed6\u5e73\u53f0\u7684\u9879\u76ee\u8fc1\u79fb\u5230 CMake</p>\n<p>CMake \u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u6784\u5efa\u51fa\u5728\u9002\u5408\u5404\u4e2a\u5e73\u53f0\u6267\u884c\u7684\u5de5\u7a0b\u73af\u5883\u3002\u800c\u5982\u679c\u5f53\u524d\u7684\u5de5\u7a0b\u73af\u5883\u4e0d\u662f CMake \uff0c\u800c\u662f\u57fa\u4e8e\u67d0\u4e2a\u7279\u5b9a\u7684\u5e73\u53f0\uff0c\u662f\u5426\u53ef\u4ee5\u8fc1\u79fb\u5230 CMake \u5462\uff1f\u7b54\u6848\u662f\u53ef\u80fd\u7684\u3002\u4e0b\u9762\u9488\u5bf9\u51e0\u4e2a\u5e38\u7528\u7684\u5e73\u53f0\uff0c\u5217\u51fa\u4e86\u5b83\u4eec\u5bf9\u5e94\u7684\u8fc1\u79fb\u65b9\u6848\u3002</p>\n<h3>autotools</h3>\n<p><a href=\"https://projects.kde.org/projects/kde/kdesdk/kde-dev-scripts/repository/revisions/master/changes/cmake-utils/scripts/am2cmake\" target=\"_blank\" rel=\"nofollow\">am2cmake</a> \u53ef\u4ee5\u5c06 autotools \u7cfb\u7684\u9879\u76ee\u8f6c\u6362\u5230 CMake\uff0c\u8fd9\u4e2a\u5de5\u5177\u7684\u4e00\u4e2a\u6210\u529f\u6848\u4f8b\u662f KDE \u3002</p>\n<p><a href=\"http://emanuelgreisen.dk/stuff/kdevelop_am2cmake.php.tgz\" target=\"_blank\" rel=\"nofollow\">Alternative Automake2CMake</a> \u53ef\u4ee5\u8f6c\u6362\u4f7f\u7528 automake \u7684 KDevelop \u5de5\u7a0b\u9879\u76ee\u3002</p>\n<p><a href=\"http://www.cmake.org/Wiki/GccXmlAutoConfHints\" target=\"_blank\" rel=\"nofollow\">Converting autoconf tests</a></p>\n<h3>qmake</h3>\n<p><a href=\"http://www.cmake.org/Wiki/CMake:ConvertFromQmake\" target=\"_blank\" rel=\"nofollow\">qmake converter</a> \u53ef\u4ee5\u8f6c\u6362\u4f7f\u7528 QT \u7684 qmake \u7684\u5de5\u7a0b\u3002</p>\n<h3>Visual Studio</h3>\n<p><a href=\"http://vcproj2cmake.sf.net/\" target=\"_blank\" rel=\"nofollow\">vcproj2cmake.rb</a> \u53ef\u4ee5\u6839\u636e Visual Studio \u7684\u5de5\u7a0b\u6587\u4ef6\uff08\u540e\u7f00\u540d\u662f .vcproj \u6216 .vcxproj\uff09\u751f\u6210 CMakeLists.txt \u6587\u4ef6\u3002</p>\n<p><a href=\"http://nberserk.blogspot.com/2010/11/converting-vc-projectsvcproj-to.html\" target=\"_blank\" rel=\"nofollow\">vcproj2cmake.ps1</a> vcproj2cmake \u7684 PowerShell \u7248\u672c\u3002</p>\n<p><a href=\"http://sourceforge.net/projects/folders4cmake/\" target=\"_blank\" rel=\"nofollow\">folders4cmake</a> \u6839\u636e Visual Studio \u9879\u76ee\u6587\u4ef6\u751f\u6210\u76f8\u5e94\u7684 \u201csource_group\u201d \u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5728 CMake \u811a\u672c\u4e2d\u4f7f\u7528\u3002\u652f\u6301 Visual Studio 9/10 \u5de5\u7a0b\u6587\u4ef6\u3002</p>\n<h3>CMakeLists.txt \u81ea\u52a8\u63a8\u5bfc</h3>\n<p><a href=\"http://websvn.kde.org/trunk/KDE/kdesdk/cmake/scripts/\" target=\"_blank\" rel=\"nofollow\">gencmake</a> \u6839\u636e\u73b0\u6709\u6587\u4ef6\u63a8\u5bfc CMakeLists.txt \u6587\u4ef6\u3002</p>\n<p><a href=\"http://www.vanvelzensoftware.com/postnuke/index.php?name=Downloads&amp;req=viewdownload&amp;cid=7\" target=\"_blank\" rel=\"nofollow\">CMakeListGenerator</a>\u5e94\u7528\u4e00\u5957\u6587\u4ef6\u548c\u76ee\u5f55\u5206\u6790\u521b\u5efa\u51fa\u5b8c\u6574\u7684 CMakeLists.txt \u6587\u4ef6\u3002\u4ec5\u652f\u6301 Win32 \u5e73\u53f0\u3002</p>\n<h2>\u76f8\u5173\u94fe\u63a5</h2>\n<ol>\n <li><p><a href=\"http://www.cmake.org/\" target=\"_blank\" rel=\"nofollow\">\u5b98\u65b9\u4e3b\u9875</a></p></li>\n <li><p><a href=\"http://www.cmake.org/cmake/help/cmake2.4docs.html\" target=\"_blank\" rel=\"nofollow\">\u5b98\u65b9\u6587\u6863</a></p></li>\n <li><p><a href=\"http://www.cmake.org/cmake/help/cmake_tutorial.html\" target=\"_blank\" rel=\"nofollow\">\u5b98\u65b9\u6559\u7a0b</a></p></li>\n <li><p><a href=\"http://www.cmake.org/Wiki/CMake#Basic_CMakeLists.txt_from-scratch-generator\" target=\"_blank\" rel=\"nofollow\">Wiki</a></p></li>\n <li><p><a href=\"http://www.cmake.org/Wiki/CMake_FAQ\" target=\"_blank\" rel=\"nofollow\">FAQ</a></p></li>\n <li><p><a href=\"http://www.cmake.org/Bug\" target=\"_blank\" rel=\"nofollow\">bug tracker</a></p></li>\n <li><p>\u90ae\u4ef6\u5217\u8868\uff1a</p></li>\n <ul>\n  <li><p><a href=\"http://dir.gmane.org/gmane.comp.programming.tools.cmake.user\" target=\"_blank\" rel=\"nofollow\">cmake on Gmane</a></p></li>\n  <li><p><a href=\"http://www.mail-archive.com/cmake@cmake.org/\" target=\"_blank\" rel=\"nofollow\">http://www.mail-archive.com/cmake@cmake.org/</a></p></li>\n  <li><p><a href=\"http://www.mail-archive.com/cmake@cmake.org/\" target=\"_blank\" rel=\"nofollow\">http://marc.info/?l=cmake</a></p></li>\n </ul>\n <li><p>\u5176\u4ed6\u63a8\u8350\u6587\u7ae0</p></li>\n <ul>\n  <li><p><a href=\"http://www.ibm.com/developerworks/cn/linux/l-cn-cmake/\" target=\"_blank\" rel=\"nofollow\">\u5728 linux \u4e0b\u4f7f\u7528 CMake \u6784\u5efa\u5e94\u7528\u7a0b\u5e8f</a></p></li>\n  <li><p><a href=\"http://www.cppblog.com/skyscribe/archive/2009/12/14/103208.aspx\" target=\"_blank\" rel=\"nofollow\">cmake\u7684\u4e00\u4e9b\u5c0f\u7ecf\u9a8c</a></p></li>\n  <li><p><a href=\"http://www.kitware.com/media/archive/kitware_quarterly0107.pdf\" target=\"_blank\" rel=\"nofollow\">Packaging Software with CPack</a></p></li>\n  <li><p><a href=\"http://www.youtube.com/watch?v=CLvZTyji_Uw\" target=\"_blank\" rel=\"nofollow\">\u89c6\u9891\u6559\u7a0b: \u300aGetting Started with CMake\u300b</a></p></li>\n </ul>\n</ol><h4>\u7c7b\u4f3c\u5de5\u5177</h4>\n<p><a href=\"http://scons.org/\" target=\"_blank\" rel=\"nofollow\">SCons</a>\uff1aEric S. Raymond\u3001Timothee Besset\u3001Zed A. Shaw \u7b49\u5927\u795e\u529b\u8350\u7684\u9879\u76ee\u67b6\u6784\u5de5\u5177\u3002\u548c CMake \u7684\u6700\u5927\u533a\u522b\u662f\u4f7f\u7528 Python \u4f5c\u4e3a\u6267\u884c\u811a\u672c\u3002</p>\n<p><a href=\"http://www.cmake.org/Wiki/CMake_Projects\" target=\"_blank\" rel=\"nofollow\">\u8fd9\u4e2a\u9875\u9762</a>\u8be6\u7ec6\u7f57\u5217\u4e86\u4f7f\u7528 CMake \u7684\u77e5\u540d\u9879\u76ee\u21a9</p>\n<p>make install\n\u5c06hello\u76f4\u63a5\u5b89\u88c5\u5230/usr/bin\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7make install \nDESTDIR=/tmp/test\u5c06\u4ed6\u5b89\u88c5\u5728\n/tmp/test/usr/bin\u76ee\u5f55\uff0c\u6253\u5305\u65f6\u8fd9\u4e2a\u65b9\u5f0f\u7ecf\u5e38\u88ab\u4f7f\u7528\u3002</p>\n<hr>\n<p><a href=\"http://www.cnblogs.com/weinyzhou/archive/2013/02/21/2970288.html\" rel=\"nofollow\">[\u7f16\u8bd1\u73af\u5883] pkg-config for mac \u5b89\u88c5</a></p>\n<p>\u7531\u4e8e\u5927\u90e8\u5206\u7684\u5f00\u6e90\u5de5\u7a0b\u90fd\u9700\u8981\u7528\u5230pkg-config,\u56e0\u6b64\u4eca\u5929\u5728\u8fd9\u8bb2\u89e3\u4e00\u4e0bpkg-config for mac \u5b89\u88c5\u8fc7\u7a0b.</p>\n<p>1.\u68c0\u6d4b\u73af\u5883\u662f\u5426\u5df2\u5b89\u88c5pkg-config</p>\n<p>\u518d\u547d\u4ee4\u884c\u4e2d\u8f93\u5165: pkg-config \u82e5\u672a\u5b89\u88c5\uff0c\u5219\u63d0\u793a\u547d\u4ee4\u672a\u627e\u5230.</p>\n<p>2.\u5b89\u88c5pkg-config</p>\n<div class=\"highlight\"><pre><code><span class=\"n\">curl</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//pkgconfig.freedesktop.org/releases/pkg-config-0.28.tar.gz -o pkg-config-0.28.tar.gz</span>\n\n<span class=\"n\">tar</span> <span class=\"o\">-</span><span class=\"n\">xf</span> <span class=\"n\">pkg</span><span class=\"o\">-</span><span class=\"n\">config</span><span class=\"o\">-</span><span class=\"mf\">0.28</span><span class=\"p\">.</span><span class=\"n\">tar</span><span class=\"p\">.</span><span class=\"n\">gz</span>\n<span class=\"n\">cd</span> <span class=\"n\">pkg</span><span class=\"o\">-</span><span class=\"n\">config</span><span class=\"o\">-</span><span class=\"mf\">0.28</span>\n\n<span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">configure</span>  <span class=\"o\">--</span><span class=\"n\">with</span><span class=\"o\">-</span><span class=\"n\">internal</span><span class=\"o\">-</span><span class=\"n\">glib</span>\n\n<span class=\"n\">make</span>\n\n<span class=\"n\">sudo</span>  <span class=\"n\">make</span> <span class=\"n\">install</span>\n</code></pre></div>\n<p>\u5230\u6b64\u5b89\u88c5\u5b8c\u6210</p>\n", "id": 14}}